<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Müll-Checker Wolfsburg</title>
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="icon" type="image/png" href="icon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
        tailwind.config = {
            theme: { extend: { colors: { anthrazit: '#1A1A1A', gold: '#D4AF37', grauhell: '#2A2A2A', weiss: '#F5F5F5' } } }
        }
    </script>
    <style>
        body { background: radial-gradient(circle at top, #2A2A2A 0%, #1A1A1A 100%); color: #F5F5F5; font-family: 'Inter', sans-serif; min-height: 100vh; overflow-x: hidden; }
        .gold-gradient { background: linear-gradient(135deg, #D4AF37 0%, #F1D279 50%, #D4AF37 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .glass-card { background: rgba(42, 42, 42, 0.85); backdrop-filter: blur(20px); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: 2rem; }
        
        /* Tonnen Animation */
        .trash-container { position: relative; width: 120px; height: 150px; margin: 0 auto 2rem; cursor: pointer; }
        .bin-body { position: absolute; bottom: 0; width: 100%; height: 80%; background: #D4AF37; border-radius: 0 0 1rem 1rem; box-shadow: 0 10px 20px rgba(0,0,0,0.3); transition: all 0.3s; }
        .bin-lid { position: absolute; bottom: 80%; width: 110%; left: -5%; height: 15%; background: #F1D279; border-radius: 0.5rem; transform-origin: left center; transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .open .bin-lid { transform: rotate(-110deg); }
        .bin-glow { position: absolute; inset: -10px; border-radius: 1rem; filter: blur(15px); opacity: 0.3; transition: background 0.5s; }
    </style>
</head>
<body class="p-4">
    <div class="max-w-md mx-auto">
        <header class="mb-8 text-center pt-6">
            <h1 class="text-4xl font-bold gold-gradient mb-1">Müll-Checker</h1>
            <p class="text-gold/60 uppercase tracking-tighter text-xs">Wolfsburg Premium App</p>
        </header>

        <div class="relative mb-8">
            <input type="text" id="suche" placeholder="Was willst du loswerden?" 
                class="w-full bg-grauhell/50 border border-gold/20 rounded-2xl py-5 px-6 text-weiss focus:outline-none focus:border-gold transition-all text-lg shadow-2xl">
        </div>

        <div id="ergebnisse" class="space-y-4 pb-10"></div>

        <div id="detail" class="hidden fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-50">
            <div id="detailCard" class="glass-card w-full max-w-sm p-10 text-center relative">
                
                <div class="trash-container" id="binContainer" onclick="schließen()">
                    <div id="glow" class="bin-glow"></div>
                    <div class="bin-lid"></div>
                    <div class="bin-body"></div>
                </div>

                <h2 id="detailTitel" class="text-2xl font-bold gold-gradient mb-2"></h2>
                <p id="detailText" class="text-weiss/80 mb-8 text-lg italic"></p>
                
                <div id="sperrmuellLink" class="hidden mt-4">
                    <a href="https://was-wolfsburg.de/sperrmuell" target="_blank" 
                       class="block w-full bg-gold text-anthrazit font-extrabold py-4 rounded-xl shadow-goldglow transition-transform active:scale-95">Sperrmüll-Termin</a>
                </div>
                
                <p class="text-gold/40 text-xs mt-6">Tippe auf die Tonne zum Schließen</p>
            </div>
        </div>
    </div>

    <script>
        let muellDaten = [];
        async function ladeDaten() {
            try {
                const res = await fetch('data.json');
                if (res.ok) muellDaten = await res.json();
            } catch (e) { console.log("Offline-Modus"); }
        }
        ladeDaten();

        const input = document.getElementById('suche');
        const list = document.getElementById('ergebnisse');

        input.addEventListener('input', (e) => {
            const val = e.target.value.toLowerCase().trim();
            list.innerHTML = '';
            if (val.length < 2) return;

            const treffer = muellDaten.filter(m => 
                m.begriff.toLowerCase().includes(val) || m.text.toLowerCase().includes(val)
            ).slice(0, 15);

            treffer.forEach(m => {
                const d = document.createElement('div');
                d.className = 'glass-card p-5 cursor-pointer hover:bg-gold/5 transition-all flex justify-between items-center animate-in slide-in-from-bottom-4';
                d.innerHTML = `<span class="font-medium">${m.begriff}</span><i data-lucide="arrow-right" class="w-5 h-5 text-gold"></i>`;
                d.onclick = () => öffnen(m);
                list.appendChild(d);
            });
            lucide.createIcons();
        });

        function öffnen(m) {
            document.getElementById('detailTitel').innerText = m.begriff;
            document.getElementById('detailText').innerText = m.text;
            
            // Tonnen-Farbe basierend auf Müllart anpassen
            const glow = document.getElementById('glow');
            const txt = m.text.toLowerCase();
            if(txt.includes('gelb')) glow.style.background = '#fbbf24';
            else if(txt.includes('blau') || txt.includes('papier')) glow.style.background = '#3b82f6';
            else if(txt.includes('bio')) glow.style.background = '#10b981';
            else glow.style.background = '#D4AF37';

            document.getElementById('detail').classList.remove('hidden');
            setTimeout(() => {
                document.getElementById('binContainer').classList.add('open');
            }, 100);

            const btn = document.getElementById('sperrmuellLink');
            if (m.sperrmuell || txt.includes('sperrmüll')) btn.classList.remove('hidden');
            else btn.classList.add('hidden');
            lucide.createIcons();
        }

        function schließen() {
            document.getElementById('binContainer').classList.remove('open');
            setTimeout(() => {
                document.getElementById('detail').classList.add('hidden');
            }, 400);
        }

        lucide.createIcons();
    </script>
</body>
</html>
